{
  "id": "chain-vibes",
  "description": "Natural language to directory/command: model uses local_shell to run e.g. ls, then responds in text",
  "tasks": [
    {
      "id": "vibe_chat",
      "description": "Chat completion with local_shell tool; model may call tool or respond with text",
      "handler": "chat_completion",
      "system_instruction": "You are a helpful assistant contenox-vibe. Model in use: {{var:model}}. Available tools: {{hookservice:list}}. Use the execute_js to interact with the enviroment. Craft proper code and iterate over turns until the user request is fulfilled.",
      "execute_config": {
        "model": "qwen2.5:7b",
        "provider": "ollama",
        "pass_clients_tools": false,
        "hooks": ["js_execution"]
      },
      "transition": {
        "on_failure": "",
        "branches": [
          {
            "operator": "equals",
            "when": "tool-call",
            "goto": "run_tools"
          },
          {
            "operator": "default",
            "when": "",
            "goto": "end"
          }
        ]
      }
    },
    {
      "id": "run_tools",
      "description": "Execute tool calls from the last message and append results to chat history",
      "handler": "execute_tool_calls",
      "input_var": "vibe_chat",
      "transition": {
        "on_failure": "",
        "branches": [
          {
            "operator": "default",
            "when": "",
            "goto": "vibe_chat"
          }
        ]
      }
    }
  ],
  "token_limit": 8192
}
